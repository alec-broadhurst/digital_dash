export component Dashboard inherits Window {
    min-width: 800px;
    min-height: 500px;

    in property <float> rpm;
    in property <float> speed;
    in property <float> best_lap;
    in property <float> current_lap;
    in property <float> race_time;
    in property <float> delta;
    in property <float> temp_left_f;
    in property <float> temp_right_f;
    in property <float> temp_left_r;
    in property <float> temp_right_r;
    in property <int> lap_number;
    in property <int> gear;
    in property <int> position;
    in property <percent> accel;
    in property <percent> brake;

    property <color> bg-color: #141720;
    property <color> text-color: #ff9a03;
    property <color> rpm1: #00FF00;
    property <color> rpm2: #ff0400;
    property <color> rpm3: #d53af8;
    property <int> led_height: 25;
    property <int> led_width: 25;
    property <int> led_border: 15;

    // Define a model for RPM lights
    in property <[bool]> rpm_lights: [false, false, false, false, false, false, false, false, false, false, false, false, false, false, false];

    GridLayout {
        min-height: 500px;
        min-width: 800px;

        /// Top row with RPM lights
        Rectangle {
            col: 0;
            row: 0;
            colspan: 3;
            height: 10%;
            background: bg_color;
            HorizontalLayout {
                padding: 15px;
                spacing: 28px;
                alignment: center;

                // RPM Light 1
                if rpm_lights[0] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #00FF00; border-radius: led_border * 1px;
                }
                if !rpm_lights[0] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }

                // RPM Light 2
                if rpm_lights[1] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #00FF00; border-radius: led_border * 1px;
                }
                if !rpm_lights[1] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }

                // RPM Light 3
                if rpm_lights[2] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #00FF00; border-radius: led_border * 1px;
                }
                if !rpm_lights[2] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }

                // RPM Light 4
                if rpm_lights[3] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #00FF00; border-radius: led_border * 1px;
                }
                if !rpm_lights[3] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }

                // RPM Light 5
                if rpm_lights[4] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #00FF00; border-radius: led_border * 1px;
                }
                if !rpm_lights[4] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }

                // RPM Light 6
                if rpm_lights[5] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #FF0000; border-radius: led_border * 1px;
                }
                if !rpm_lights[5] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }

                // RPM Light 7
                if rpm_lights[6] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #FF0000; border-radius: led_border * 1px;
                }
                if !rpm_lights[6] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }

                // RPM Light 8
                if rpm_lights[7] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #FF0000; border-radius: led_border * 1px;
                }
                if !rpm_lights[7] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }

                // RPM Light 9
                if rpm_lights[8] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #FF0000; border-radius: led_border * 1px;
                }
                if !rpm_lights[8] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }

                // RPM Light 10
                if rpm_lights[9] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #FF0000; border-radius: led_border * 1px;
                }
                if !rpm_lights[9] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }

                // RPM Light 11
                if rpm_lights[10] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #800080; border-radius: led_border * 1px;
                }
                if !rpm_lights[10] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }

                // RPM Light 12
                if rpm_lights[11] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #800080; border-radius: led_border * 1px;
                }
                if !rpm_lights[11] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }

                // RPM Light 13
                if rpm_lights[12] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #800080; border-radius: led_border * 1px;
                }
                if !rpm_lights[12] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }

                // RPM Light 14
                if rpm_lights[13] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #800080; border-radius: led_border * 1px;
                }
                if !rpm_lights[13] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }

                // RPM Light 15
                if rpm_lights[14] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #800080; border-radius: led_border * 1px;
                }
                if !rpm_lights[14] : Rectangle { 
                    width: led_width * 1px; height: led_height * 1px; background: #C0C0C0; border-radius: led_border * 1px;
                }
            }
        }

        // Left side
        VerticalLayout {
            width: 25%;
            col: 0;
            row: 1;
            Rectangle {
                border-width: 1px;
                border-color: white;
                background: bg-color;
                Text {
                    font-size: 30px;
                    text: "\{root.speed}\nspeed";
                    color: text-color;
                }
            }

            Rectangle {
                border-width: 1px;
                border-color: white;
                background: bg-color;
                Text {
                    font-size: 30px;
                    text: "\{root.rpm}\nrpm";
                    color: text-color;
                }
            }

            Rectangle {
                border-width: 1px;
                border-color: white;
                height: 15%;
                background: bg-color;
                Text {
                    font-size: 30px;
                    text: "P\{root.position}";
                    color: text-color;
                }
            }

            Rectangle {
                border-width: 1px;
                border-color: white;
                height: 15%;
                background: bg-color;
                Text {
                    font-size: 30px;
                    text: "L\{root.lap_number + 1}";
                    color: text-color;
                }
            }
        }

        // Center
        VerticalLayout {
            width: 50%;
            col: 1;
            row: 1;
            GridLayout {
                // Left thin rectangle
                Rectangle {
                    background: @linear-gradient(0deg, red root.brake / 255 * 100, black 0%);
                    row: 0;
                    col: 0;
                    width: 5%; // Thin width
                    height: 100%;
                    //background: bg-color;
                    border-width: 1px;
                    border-color: white;
                }
                // Gear rectangle
                Rectangle {
                    row: 0;
                    col: 1;
                    height: 70%;
                    background: bg-color;
                    border-width: 1px;
                    border-color: white;
                    Text {
                        font-size: 100px;
                        text: "\{root.gear}\ngear";
                        color: text-color;
                    }
                }
                // Right thin rectangle
                Rectangle {
                    background: @linear-gradient(0deg, green root.accel / 255 * 100, black 0%);
                    row: 0;
                    col: 2;
                    width: 5%; // Thin width
                    height: 100%;
                    //background: bg-color;
                    border-width: 1px;
                    border-color: white;
                }
            }

            Rectangle {
                border-width: 1px;
                border-color: white;
                background: bg-color;
                height: 10%;
                Text {
                    font-size: 15px;
                    text: "Current: \{root.current_lap}";
                    color: text-color;
                }
            }

            Rectangle {
                border-width: 1px;
                border-color: white;
                height: 10%;
                background: bg-color;
                Text {
                    text: "\{root.delta}\nDelta";
                    color: text-color;
                }
            }

            Rectangle {
                border-width: 1px;
                border-color: white;
                height: 10%;
                background: bg-color;
                Text {
                    text: "\{root.best_lap}\nBest";
                    color: text-color;
                }
            }
        }

        // Right side
        VerticalLayout {
            width: 25%;
            col: 2;
            row: 1;
            // Tire temp
            Rectangle {
                VerticalLayout {
                    HorizontalLayout {
                        height: 50%;
                        width: 50%;
                        Rectangle {
                            width: 50%;
                            border-width: 1px;
                            border-color: white;
                            background: bg-color;
                            Text {
                                font-size: 30px;
                                text: "\{root.temp_left_f}";
                                color: text-color;
                            }
                        }

                        Rectangle {
                            width: 50%;
                            border-width: 1px;
                            border-color: white;background: bg-color;
                            Text {
                                font-size: 30px;
                                text: "\{root.temp_right_f}";
                                color: text-color;
                            }
                        }
                    }

                    HorizontalLayout {
                        height: 50%;
                        width: 50%;
                        Rectangle {
                            width: 50%;
                            border-width: 1px;
                            border-color: white;
                            background: bg-color;
                            Text {
                                font-size: 30px;
                                text: "\{root.temp_left_r}";
                                color: text-color;
                            }
                        }

                        Rectangle {
                            width: 50%;
                            border-width: 1px;
                            border-color: white;
                            background: bg-color;
                            Text {
                                font-size: 30px;
                                text: "\{root.temp_right_r}";
                                color: text-color;
                            }
                        }
                    }
                }
            }
        }
    }
}
